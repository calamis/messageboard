{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/damboy/Projects/nextjs/messageboard/pages/[id]/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { Spinner, Button, Modal } from 'react-bootstrap';\nimport { Confirm } from 'react-confirm-bootstrap';\n\nvar singleNote = function singleNote(_ref) {\n  _s();\n\n  var note = _ref.note;\n\n  var _useState = useState(false),\n      confirm = _useState[0],\n      setConfirm = _useState[1];\n\n  var _useState2 = useState(false),\n      isDeleting = _useState2[0],\n      setIsDeleting = _useState2[1];\n\n  var _useState3 = useState(false),\n      show = _useState3[0],\n      setShow = _useState3[1];\n\n  var router = useRouter();\n  useEffect(function () {\n    if (isDeleting) {\n      deleteNote();\n    }\n  }, [isDeleting]);\n\n  var open = function open() {\n    return setShow(true);\n  };\n\n  var close = function close() {\n    return setShow(false);\n  };\n\n  var onConfirm = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsDeleting(true);\n              close();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onConfirm() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deleteNote = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var noteID, deleted;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              noteID = router.query.id;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return fetch(\"http://localhost:3000/api/notes/\".concat(noteID), {\n                method: 'Delete'\n              });\n\n            case 4:\n              deleted = _context2.sent;\n              router.push(\"/\");\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    return function deleteNote() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"main__single__note\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"container text-left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 32\n    }\n  }, \"Back to Board\"))), __jsx(\"div\", {\n    className: \"container text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, isDeleting ? __jsx(Spinner, {\n    animation: \"border\",\n    role: \"status\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    className: \"sr-only\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 29\n    }\n  }, \"Loading...\")) : __jsx(React.Fragment, null, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 25\n    }\n  }, note.title), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }\n  }, note.description), __jsx(Button, {\n    variant: \"danger\",\n    type: \"submit\",\n    onClick: open,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }\n  }, \"Delete\")), __jsx(Modal, {\n    show: show,\n    onHide: close,\n    backdrop: \"static\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, __jsx(Modal.Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, __jsx(Modal.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, \"Delete\")), __jsx(Modal.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, \"Are you sure you want to delete this?\"), __jsx(Modal.Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"secondary\",\n    onClick: close,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    variant: \"primary\",\n    onClick: onConfirm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \"Confirm\")))));\n};\n\n_s(singleNote, \"JGFwHfp0xkdlk0XvPHOV9ufVyro=\", false, function () {\n  return [useRouter];\n});\n\nsingleNote.getInitialProps = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref4) {\n    var id, res, _yield$res$json, data;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            id = _ref4.query.id;\n            _context3.next = 3;\n            return fetch(\"http://localhost:3000/api/notes/\".concat(id));\n\n          case 3:\n            res = _context3.sent;\n            _context3.next = 6;\n            return res.json();\n\n          case 6:\n            _yield$res$json = _context3.sent;\n            data = _yield$res$json.data;\n            return _context3.abrupt(\"return\", {\n              note: data\n            });\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nexport default singleNote;","map":{"version":3,"sources":["/Users/damboy/Projects/nextjs/messageboard/pages/[id]/index.js"],"names":["fetch","useState","useEffect","useRouter","Link","Spinner","Button","Modal","Confirm","singleNote","note","confirm","setConfirm","isDeleting","setIsDeleting","show","setShow","router","deleteNote","open","close","onConfirm","noteID","query","id","method","deleted","push","console","log","title","description","getInitialProps","res","json","data"],"mappings":"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","sourcesContent":["import fetch from 'isomorphic-unfetch'\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport { Spinner, Button, Modal } from 'react-bootstrap'\nimport { Confirm } from 'react-confirm-bootstrap'\n\nconst singleNote = ({ note }) => {\n    const [confirm, setConfirm] = useState(false);\n    const [isDeleting, setIsDeleting] = useState(false);\n    const [show, setShow] = useState(false);\n    const router = useRouter();\n\n    useEffect(() => {\n        if (isDeleting) {\n            deleteNote();\n        }\n    }, [isDeleting])\n\n    const open = () => setShow(true);\n    const close = () => setShow(false);\n\n    const onConfirm = async () => {\n        setIsDeleting(true);\n        close();\n    }\n\n    const deleteNote = async () => {\n        const noteID = router.query.id;\n        try {\n            const deleted = await fetch(`http://localhost:3000/api/notes/${noteID}`, {\n                method: 'Delete'\n            });\n            router.push(\"/\");\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    return (\n        <div className=\"main__single__note\">\n            <div className=\"container text-left\">\n                <Link href=\"/\"><a>Back to Board</a></Link>\n            </div>\n            <div className=\"container text-center\">\n                {\n                    isDeleting\n                    ?   <Spinner animation=\"border\" role=\"status\">\n                            <span className=\"sr-only\">Loading...</span>\n                        </Spinner>\n                    : <>\n                        <h1>{note.title}</h1>\n                        <p>{note.description}</p>\n                        <Button variant=\"danger\" type=\"submit\" onClick={open}>Delete</Button>\n                    </>\n                }\n                <Modal show={show} onHide={close} backdrop=\"static\">\n                    <Modal.Header>\n                    <Modal.Title>Delete</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>Are you sure you want to delete this?</Modal.Body>\n                    <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={close}>\n                        Cancel\n                    </Button>\n                    <Button variant=\"primary\" onClick={onConfirm}>\n                        Confirm\n                    </Button>\n                    </Modal.Footer>\n                </Modal>\n            </div>\n        </div>  \n    )\n}\n\nsingleNote.getInitialProps = async ({ query: { id } }) => {\n    const res = await fetch(`http://localhost:3000/api/notes/${id}`)\n    const { data } = await res.json();\n\n    return { note: data }\n}\n\nexport default singleNote;   "]},"metadata":{},"sourceType":"module"}